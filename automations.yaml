---
# Lights
- alias: Dining Room
  trigger:
    - platform: state
      entity_id: binary_sensor.kitchen_is_dark
      to: "on"
  action:
    - service: homeassistant.turn_on
      data:
        entity_id: group.living_room

# Fun stuff

- alias: "Julia @ Parents"
  trigger:
    - platform: zone
      entity_id: person.julia
      zone: zone.home_julia
      event: enter
  action:
    - service: notify.mobile_app_julias_iphone
      data:
        message: "Welcome! Nice to see your parents, isn't it?"

# Convenience

- alias: "Turn Off Lights When Charging"
  trigger:
    - platform: state
      entity_id: binary_sensor.moritz_is_charging
      to: "on"
    - platform: state
      entity_id: sensor.julias_iphone_battery_state
      to: "Charging"
  condition:
    - condition: state
      entity_id: person.julia
      state: home
    - condition: state
      entity_id: person.moritz
      state: home
  action:
    - service: homeassistant.turn_off
      data:
        entity_id: group.living_room
    - service: homeassistant.turn_off
      data:
        entity_id: group.kitchen

# Aquaponics

- alias: "Restart Aquaponics"
  trigger:
    - platform: state
      entity_id: binary_sensor.aquaponics_plug_restart
      to: "on"
  action:
    - service: automation.reload
    - service: automation.trigger
      data:
        entity_id: automation.turn_on_aquaponics
    - service: notify.mobile_app_moritz
      data:zwif
        message: "Restart Aquaponics"

- alias: "Turn On Aquaponics"
  trigger:
    - platform: state
      entity_id: switch.outdoor_plug
      to: "off"
      for: "00:45:00"
  action:
    - service: switch.turn_on
      data:
        entity_id: switch.outdoor_plug

- alias: "Turn Off Aquaponics"
  trigger:
    - platform: state
      entity_id: switch.outdoor_plug
      to: "on"
      for: "00:02:00"
  action:
    - service: switch.turn_off
      data:
        entity_id: switch.outdoor_plug
