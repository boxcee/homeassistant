---
- platform: history_stats
  name: Time @ Home Moritz
  entity_id: person.moritz
  state: "home"
  type: ratio
  duration:
    days: 14
  end: "{{ now() }}"

- platform: history_stats
  name: Time @ Home Julia
  entity_id: person.julia
  state: "home"
  type: ratio
  duration:
    days: 14
  end: "{{ now() }}"

- platform: history_stats
  name: TV
  entity_id: media_player.tv
  state: "on"
  type: time
  duration:
    days: 14
  end: "{{ now() }}"

- platform: history_stats
  name: Soundtouch Living Room
  entity_id: media_player.soundtouch_living_room
  state: "playing"
  type: time
  duration:
    days: 14
  end: "{{ now() }}"

- platform: here_travel_time
  name: Julia Work
  api_key: !secret here_travel_api_key
  origin_entity_id: person.julia
  destination_entity_id: zone.work_julia
  mode: bicycle

- platform: here_travel_time
  name: Moritz Work
  api_key: !secret here_travel_api_key
  origin_entity_id: person.moritz
  destination_entity_id: zone.work_moritz
  mode: bicycle

- platform: fitbit
  clock_format: 24H
  monitored_resources:
    - activities/activityCalories
    - activities/calories
    - activities/caloriesBMR
    - activities/distance
    - activities/elevation
    - activities/floors
    - activities/heart
    - activities/minutesFairlyActive
    - activities/minutesLightlyActive
    - activities/minutesSedentary
    - activities/minutesVeryActive
    - activities/steps
    - activities/tracker/activityCalories
    - activities/tracker/calories
    - activities/tracker/distance
    - activities/tracker/elevation
    - activities/tracker/floors
    - activities/tracker/minutesFairlyActive
    - activities/tracker/minutesLightlyActive
    - activities/tracker/minutesSedentary
    - activities/tracker/minutesVeryActive
    - activities/tracker/steps
    - body/bmi
    - body/fat
    - body/weight
    - devices/battery
    - sleep/awakeningsCount
    - sleep/efficiency
    - sleep/minutesAfterWakeup
    - sleep/minutesAsleep
    - sleep/minutesAwake
    - sleep/minutesToFallAsleep
    - sleep/startTime
    - sleep/timeInBed

# Lights

- platform: history_stats
  name: Hallway Ceiling Light Bathroom
  entity_id: light.hallway_bathroom_ceiling_level_light_color_on_off
  state: "on"
  type: time
  duration:
    days: 14
  end: "{{ now() }}"

- platform: history_stats
  name: Hallway Ceiling Light Door
  entity_id: light.hallway_entrance_ceiling_level_light_color_on_off
  state: "on"
  type: time
  duration:
    days: 14
  end: "{{ now() }}"

- platform: history_stats
  name: Hallway Ceiling Light Office
  entity_id: light.hallway_office_ceiling_level_light_color_on_off
  state: "on"
  type: time
  duration:
    days: 14
  end: "{{ now() }}"

- platform: history_stats
  name: Dining Room Wall Light
  entity_id: light.dining_room_wall_level_on_off
  state: "on"
  type: time
  duration:
    days: 14
  end: "{{ now() }}"

- platform: history_stats
  name: Kitchen Ceiling Light
  entity_id: light.kitchen_ceiling_level_on_off
  state: "on"
  type: time
  duration:
    days: 14
  end: "{{ now() }}"

- platform: history_stats
  name: Bedroom Ceiling Light
  entity_id: light.bedroom_ceiling_level_light_color_on_off
  state: "on"
  type: time
  duration:
    days: 14
  end: "{{ now() }}"

- platform: history_stats
  name: Living Room Ceiling Light
  entity_id: light.living_room_ceiling_level_light_color_on_off
  state: "on"
  type: time
  duration:
    days: 14
  end: "{{ now() }}"

# - platform: rest
#   resource_template: https://revgeocode.search.hereapi.com/v1/revgeocode?at={{ state_attr("person.moritz", "latitude") }}%2C{{ state_attr("person.moritz", "longitude") }}&lang=en-GB&apiKey=!secret here_travel_api_key
#   value_template: '{{ value_json["items"][0]["address"]["district"] }}'

#- platform: rest
#  name: Moritz Location
#  resource_template: "https://revgeocode.search.hereapi.com/v1/revgeocode"
#  params:
#    at: '{{ state_attr("person.moritz", "latitude") }},{{ state_attr("person.moritz", "longitude") }}'
#    lang: "en-GB"
#    apiKey: !secret here_travel_api_key
#  value_template: >
#    {% if value_json['items'][0]['address']['city'] == 'Berlin' %}
#      Berlin: {{ value_json['items'][0]['address']['district'] }}
#    {% else %}
#      {{ value_json['items'][0]['address']['city'] }}
#    {% endif %}
